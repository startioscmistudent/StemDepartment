<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ICT & Computing Science Programs – STEM Department</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<header>
  <!-- First Row: Logo + Title -->
  <div class="header-top">
    <a href="https://www.cmi.edu/" target="_blank" rel="noopener noreferrer" aria-label="College of the Marshall Islands homepage">
      <img src="img/cmi logo.avif" alt="CMI Logo" class="logo-img">
    </a>
    <h1 class="header-title">STEM Department</h1>
  </div>

  <!-- Mobile hamburger (shown on small screens) -->
  <button class="hamburger" aria-label="Toggle navigation" aria-expanded="false" aria-controls="main-nav">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <!-- Second Row: Navigation Links -->
  <nav id="main-nav" class="header-nav">
    <ul>
      <li><a href="index.html">Program</a></li>
      <li><a href="ICTPathways.html">ICT Pathways</a></li>
      <li><a href="courses.html">Courses</a></li>
      <li><a href="instructors.html">Our Instructors</a></li>
      <li><a href="enroll.html">Apply</a></li>
    </ul>
  </nav>
</header>

<body>
  <main class="site-main">
    <!-- Enrollment -->
    <section class="enroll container">
      <h2>Apply for ICT & Computing Science Programs</h2>
      <p>Take your first step toward a future in technology. Fill out the form below to submit your application.</p>

      <div class="form-wrap">
<form id="enrollForm" class="enroll-form" novalidate>
  <!-- Full Name -->
  <div class="form-group">
    <label for="fullname">Full Name</label>
    <input id="fullname" name="name" type="text" placeholder="Spongebob SquarePants" required>
  </div>

  <!-- Email -->
  <div class="form-group">
    <label for="email">Email Address (optional — provide phone if you don't have email)</label>
    <input id="email" name="email" type="email" placeholder="you@example.com">
  </div>

  <!-- Phone -->
  <div class="form-group">
    <label for="phone">Phone Number (required if no email)</label>
    <input id="phone" name="phone" type="tel" placeholder="(+1) 555-555-5555">
  </div>

  <!-- Honeypot -->
  <input type="text" name="_gotcha" style="display:none" aria-hidden="true">

  <div id="formError" class="error-message" role="alert" aria-live="assertive" style="display:none;color:#b00020;margin-top:.5rem;"></div>

  <button id="submitBtn" type="submit" class="cta-btn">Submit Application</button>
</form>

<script>
(function() {
  const form = document.getElementById('enrollForm');
  const submitBtn = document.getElementById('submitBtn');
  const formError = document.getElementById('formError');

  // ⭐ REPLACE THIS WITH YOUR GOOGLE SCRIPT URL
  const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzljqBG5GLMgb047n6ilbb4OPjw-zJ5s3RbFva94E5NXwiIcY8Dmb1AbdiJ-F1hL8Zs/exec";

  function showError(msg) {
    formError.textContent = msg;
    formError.style.display = 'block';
  }
  
  function clearError() {
    formError.textContent = '';
    formError.style.display = 'none';
  }

  form.addEventListener('submit', async function(e) {
    e.preventDefault();
    clearError();

    const email = form.querySelector('#email').value.trim();
    const phone = form.querySelector('#phone').value.trim();
    const honeypot = form.querySelector('input[name="_gotcha"]').value;

    // Spam bot caught
    if (honeypot) return;

    // Require at least email or phone
    if (!email && !phone) {
      showError('Please provide an email address or a phone number so we can contact you.');
      return;
    }

    submitBtn.disabled = true;
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Submitting...';

    // Collect form data into JSON
    const data = {
      name: form.querySelector('#fullname').value,
      email: email,
      phone: phone
    };

    try {
      await fetch(GOOGLE_SCRIPT_URL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      // Redirect to success page
      window.location.href = 'success.html';

    } catch (err) {
      console.error(err);
      showError('There was a problem submitting the form. Please try again.');
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });
})();
</script>
  </main>
  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; <span id="year"></span> <a href="https://www.cmi.edu/" target="_blank" rel="noopener noreferrer">College of the Marshall Islands</a> – STEM Department. All rights reserved.</p>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
<script>
  (function() {
    const btn = document.querySelector('.hamburger');
    const nav = document.getElementById('main-nav') || document.querySelector('.header-nav');
    if (!btn || !nav) return;

    btn.addEventListener('click', () => {
      const isOpen = nav.classList.toggle('open');
      btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
    });

    nav.addEventListener('click', (e) => {
      if (e.target.tagName === 'A') {
        nav.classList.remove('open');
        btn.setAttribute('aria-expanded', 'false');
      }
    });
  })();
</script>
</body>

</html>
